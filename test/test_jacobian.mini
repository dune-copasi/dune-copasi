_jacobian_type = numerical, analytical           | expand
_name_sufix = {_jacobian_type}
__name = {_name_sufix}

[grid]
file = grids/test_cell.msh
initial_level = 0

[model]
order = 1
jacobian_type = {_jacobian_type} # extra

[model.time_stepping]
rk_method = alexander_2
begin = 0.
end = 0.01
step = 2e-3
initial_step = 2e-3
min_step = 1e-3
max_step = 2e-3
decrease_factor = 0.9
increase_factor = 1.1

[model.writer]
file_path = {__name}

[model.compartments]
cell     = 0
nucleoid = 1

############################ Model for cell ############################
[model.cell.initial]
u = 10

[model.cell.reaction]
u = -5*u

[model.cell.reaction.jacobian]
du_du = -5

[model.cell.diffusion]
u = 1.

############################ Model for nucleoid ############################
[model.nucleoid.initial]
u = 5
v = 10

[model.nucleoid.reaction]
u = -u*v
v = -10*u

[model.nucleoid.reaction.jacobian]
du_du = -v
du_dv = -u
dv_du = -10
dv_dv = 0

[model.nucleoid.diffusion]
u = 1.
v = 1.

######################### Compare with reference vtk ######################### 
[wrapper.vtkcompare]
name = {__name}/{__name}-cell-00005 {__name}/{__name}-nucleoid-00005
reference = reference/cell-00005 reference/nucleoid-00005
extension = vtu vtu
relative = 2e-2
absolute = 1e-9

############################ Logging settings #################################
# levels = off, critical, error, waring, notice, info, detail, debug, trace, all

# Sink setup for console stdcout
[logging.sinks.stdout]
level = info # max level to output on this sink
pattern = "[\\{reldays:0>2\\}-\\{reltime:8%T\\}] [\\{backend\\}] \\{msg\\}"

# Sink setup for logfile output
[logging.sinks.logfile]
level = all # max level to output on this sink
type = rank-0-file
file = {__name}.log
pattern = "[\\{reldays:0>2\\}-\\{reltime:8%T\\}] [\\{backend\\}] \\{msg\\}"

# Logger internal info go into this logger
[logging.internal]
level = off

# General info go into this logger
# Settings on this logger are the default values for other backend loggers
[logging.default]
level = detail
indent = 0
sinks = logfile, stdout

# Logger info go into this logger
[logging.backend.logging]
level = off
indent = 0

# Grid info go into this logger
[logging.backend.grid]
level = detail
indent = 2

# General model info go into this logger
[logging.backend.model]
level = detail
indent = 2

# Time stepping info go into this logger
[logging.backend.stepper]
level = detail
indent = 4

# writer info go into this logger
[logging.backend.writer]
level = trace
indent = 4
